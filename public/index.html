<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Audio stream</title>
</head>
<body>
<h1>Audio Stream</h1>

<div id="player-div">
</div>

<div id="search-div">
    <input id="search-input" type="text">
    <button id="search-result">Search</button>
    <div>
        <button id="play-audio">Play</button>
    </div>
</div>


<script>

    function addAudioPlayer(videoId = "hVdhuFuNL28") { // "hVdhuFuNL28" is the first result I got on this app
        const player = new window.Audio(`/audio/${videoId}`)
        player.preload = 'metadata'
        player.play()
        player.controls = true
        player.id = 'player'
        document.getElementById('player-div').appendChild(player);
    }

    document.getElementById('play-audio').addEventListener('click', async function () {
        if (document.getElementById('player')) {
            document.getElementById('player').remove();
        }
        addAudioPlayer();
    });

    document.getElementById('search-result').addEventListener('click', async function () {
        const res = await fetch(`/search/${document.getElementById('search-input').value}`);
        const data = await res.json();
        console.log(data);
    });
</script>
</body>
</html>